<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê³µì§€ì‚¬í•­ ìƒì„¸</title>
  <link rel="stylesheet" href="../asset/style.css">
</head>

<body class="notice-detail-page">
  <div class="container">
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">T</div>
        <div class="logo-text">
          <div class="logo-title">Timbel</div>
          <div class="logo-url">timbel.net</div>
        </div>
        <button class="logout-btn" title="ë¡œê·¸ì•„ì›ƒ">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_logout)">
              <path
                d="M12 3H6.66667C5.95942 3 5.28115 3.27092 4.78105 3.75315C4.28095 4.23539 4 4.88944 4 5.57143V18.4286C4 19.1106 4.28095 19.7646 4.78105 20.2468C5.28115 20.7291 5.95942 21 6.66667 21H12"
                stroke="#4D5256" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M15.75 8.25L19.5 12M19.5 12L15.75 15.75M19.5 12H8" stroke="#4D5256" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_logout">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
      </div>

      <div class="menu-section">
        <h3>ì‹œìŠ¤í…œê´€ë¦¬</h3>
        <ul>
          <li><a href="workspace.html">ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬</a></li>
          <li><a href="system_user.html">ì‚¬ìš©ì ê´€ë¦¬</a></li>
          <li><a href="menu_setting.html">ë©”ë‰´ ìƒì„± ê´€ë¦¬</a></li>
          <li><a href="group_setting.html">ë©”ë‰´ ê¶Œí•œ ê´€ë¦¬</a></li>
          <li><a href="system_stats_usage.html">ì‚¬ìš©ëŸ‰ í†µê³„</a></li>
          <li><a href="system_stats_user.html">ì‚¬ìš©ìë³„ í†µê³„</a></li>
        </ul>
      </div>

      <div class="menu-section">
        <div class="menu-section-header">
          <h3>ì›Œí¬ìŠ¤í˜ì´ìŠ¤</h3>
        </div>
        <ul>
          <li><a href="workspace_permission.html">ê¸°ëŠ¥ ê¶Œí•œ ê´€ë¦¬</a></li>
          <li><a href="workspace_group_setting.html">ë©”ë‰´ ê¶Œí•œ ê´€ë¦¬</a></li>
          <li><a href="user.html">ì‚¬ìš©ì ê´€ë¦¬</a></li>
          <li><a href="logo.html">ë¡œê³  ì´ë¯¸ì§€ ê´€ë¦¬</a></li>
          <li><a href="meet_template.html">íšŒì˜ í…œí”Œë¦¿ ê´€ë¦¬</a></li>
          <li><a href="prompt.html">í”„ë¡¬í”„íŠ¸ ê´€ë¦¬</a></li>
          <li><a href="consent.html">ë™ì˜ì„œ ê´€ë¦¬</a></li>
          <li><a href="calendar.html">ìº˜ë¦°ë” ê´€ë¦¬</a></li>
          <li><a href="login_history.html">ì‚¬ìš©ì ì ‘ì† ì´ë ¥</a></li>
          <li><a href="download_history.html">ë‹¤ìš´ë¡œë“œ ì´ë ¥</a></li>
          <li><a href="user_consent_history.html">ì‚¬ìš©ì ë™ì˜ ì´ë ¥</a></li>
          <li><a href="setting_change_history.html">ì„¤ì •ë³€ê²½ ì´ë ¥</a></li>
          <li><a href="meeting.html">íšŒì˜ë¡ ê´€ë¦¬</a></li>
          <li><a href="dictionary.html">ì‚¬ì „ ê´€ë¦¬</a></li>
          <li><a href="notice.html" class="active">ê³µì§€ì‚¬í•­ ê´€ë¦¬</a></li>
          <li><a href="stats_usage.html">ì‚¬ìš©ëŸ‰ í†µê³„</a></li>
          <li><a href="stats_user.html">ì‚¬ìš©ìë³„ í†µê³„</a></li>
        </ul>
      </div>
    </div>

    <div class="content">
      <div class="content-header">
        <div class="breadcrumb">
          <a href="notice.html" class="breadcrumb-link">ê³µì§€ì‚¬í•­ ê´€ë¦¬</a> >
          <span id="breadcrumb-title">ê³µì§€ì‚¬í•­ ìƒì„¸</span>
        </div>
      </div>

      <div class="content-body">
        <!-- ê³µì§€ì‚¬í•­ ì‘ì„±/ìˆ˜ì • í¼ -->
        <div class="notice-detail-form">
          <form id="notice-form">
            <div class="form-section">
              <h3>ê¸°ë³¸ ì •ë³´</h3>

              <div class="form-row">
                <div class="form-group">
                  <label for="notice-title">ì œëª© <span class="required">*</span></label>
                  <input type="text" id="notice-title" class="form-input" placeholder="ê³µì§€ì‚¬í•­ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="notice-status">ìƒíƒœ</label>
                  <div class="combo-select">
                    <select id="notice-status" class="form-select">
                      <option value="draft">ì„ì‹œì €ì¥</option>
                      <option value="published">ê²Œì‹œì¤‘</option>
                      <option value="scheduled">ì˜ˆì•½ê²Œì‹œ</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="notice-start-date">ê²Œì‹œ ì‹œì‘ì¼</label>
                  <input type="datetime-local" id="notice-start-date" class="form-input">
                </div>
                <div class="form-group">
                  <label for="notice-end-date">ê²Œì‹œ ì¢…ë£Œì¼</label>
                  <input type="datetime-local" id="notice-end-date" class="form-input">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group checkbox-group">
                  <input type="checkbox" id="notice-popup" class="form-checkbox">
                  <label for="notice-popup">íŒì—…ìœ¼ë¡œ í‘œì‹œ</label>
                </div>
                <div class="form-group checkbox-group">
                  <input type="checkbox" id="notice-top-fixed" class="form-checkbox">
                  <label for="notice-top-fixed">ìƒë‹¨ ê³ ì •</label>
                </div>
              </div>

              <!-- íŒì—… ì„¤ì • ì˜µì…˜ -->
              <div class="form-row popup-settings" id="popup-settings-row" style="display: none;">
                <div class="form-group full-width">
                  <label>íŒì—… ì„¤ì •</label>
                  <div class="popup-options">
                    <div class="checkbox-group">
                      <input type="checkbox" id="popup-dismiss-option" class="form-checkbox">
                      <label for="popup-dismiss-option">"ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°" ì˜µì…˜ ì œê³µ</label>
                    </div>

                    <div class="dismiss-options" id="dismiss-options"
                      style="display: none; margin-top: 12px; margin-left: 24px;">
                      <div class="dismiss-option-title">ì‚¬ìš©ì ì„ íƒì§€:</div>
                      <div class="dismiss-choices">
                        <div class="checkbox-group">
                          <input type="checkbox" id="dismiss-today" class="dismiss-checkbox" checked>
                          <label for="dismiss-today">ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°</label>
                        </div>
                        <div class="checkbox-group">
                          <input type="checkbox" id="dismiss-3days" class="dismiss-checkbox" checked>
                          <label for="dismiss-3days">3ì¼ë™ì•ˆ ë³´ì§€ ì•Šê¸°</label>
                        </div>
                        <div class="checkbox-group">
                          <input type="checkbox" id="dismiss-week" class="dismiss-checkbox" checked>
                          <label for="dismiss-week">ì¼ì£¼ì¼ ë™ì•ˆ ë³´ì§€ ì•Šê¸°</label>
                        </div>
                        <div class="checkbox-group">
                          <input type="checkbox" id="dismiss-forever" class="dismiss-checkbox">
                          <label for="dismiss-forever">ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</label>
                        </div>
                      </div>
                      <div class="dismiss-note">
                        <small>âš ï¸ ì°¸ê³ : "ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°"ëŠ” ì˜êµ¬ì ìœ¼ë¡œ ìˆ¨ê²¨ì§€ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•˜ì„¸ìš”.</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>ë‚´ìš© ì‘ì„±</h3>

              <div class="form-row">
                <div class="form-group full-width">
                  <label for="notice-content">ë‚´ìš© <span class="required">*</span></label>
                  <div class="editor-toolbar">
                    <button type="button" class="editor-btn" data-command="bold" title="êµµê²Œ">
                      <strong>B</strong>
                    </button>
                    <button type="button" class="editor-btn" data-command="italic" title="ê¸°ìš¸ì„">
                      <em>I</em>
                    </button>
                    <button type="button" class="editor-btn" data-command="underline" title="ë°‘ì¤„">
                      <u>U</u>
                    </button>
                    <div class="editor-divider"></div>
                    <button type="button" class="editor-btn" data-command="insertOrderedList" title="ë²ˆí˜¸ ëª©ë¡">
                      1.
                    </button>
                    <button type="button" class="editor-btn" data-command="insertUnorderedList" title="ê¸€ë¨¸ë¦¬ ëª©ë¡">
                      â€¢
                    </button>
                    <div class="editor-divider"></div>
                    <button type="button" class="editor-btn" data-command="createLink" title="ë§í¬">
                      ğŸ”—
                    </button>
                    <button type="button" class="editor-btn" id="insert-image-btn" title="ì´ë¯¸ì§€">
                      ğŸ–¼ï¸
                    </button>
                  </div>
                  <div id="notice-content" class="form-editor" contenteditable="true" placeholder="ê³µì§€ì‚¬í•­ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">
                  </div>
                  <input type="file" id="image-upload" accept="image/*" style="display: none;">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>ì²¨ë¶€íŒŒì¼</h3>

              <div class="form-row">
                <div class="form-group full-width">
                  <div class="file-upload-area" id="file-upload-area">
                    <div class="file-upload-placeholder">
                      <span class="upload-icon">ğŸ“</span>
                      <p>íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                      <p class="file-info">ìµœëŒ€ 10MB, jpg, png, pdf, doc, docx, xls, xlsx íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥</p>
                    </div>
                    <input type="file" id="file-upload" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx">
                  </div>
                  <div class="uploaded-files" id="uploaded-files">
                    <!-- ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                  </div>
                </div>
              </div>
            </div>

          </form>
        </div>

        <!-- í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ -->
        <div class="form-actions">
          <div class="actions-left">
            <button type="button" class="btn btn-outline" id="preview-btn">ë¯¸ë¦¬ë³´ê¸°</button>
          </div>
          <div class="actions-right">
            <button type="button" class="btn btn-outline" id="cancel-btn">ì·¨ì†Œ</button>
            <button type="button" class="btn btn-secondary" id="save-draft-btn">ì„ì‹œì €ì¥</button>
            <button type="button" class="btn btn-primary" id="save-publish-btn">ì €ì¥ ë° ê²Œì‹œ</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ -->
  <div class="modal-overlay modal-overlay-hidden" id="preview-modal">
    <div class="modal modal-large">
      <div class="modal-header">
        <h3>ê³µì§€ì‚¬í•­ ë¯¸ë¦¬ë³´ê¸°</h3>
        <button class="modal-close" id="preview-modal-close">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="notice-preview">
          <div class="preview-header">
            <h2 id="preview-title"></h2>
            <div class="preview-meta">
              <span class="preview-date"></span>
              <span class="preview-author">ê´€ë¦¬ì</span>
            </div>
          </div>
          <div class="preview-content" id="preview-content">
          </div>
          <div class="preview-files" id="preview-files">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="preview-close-btn">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    // ê³µì§€ì‚¬í•­ ìƒì„¸ í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸
    document.addEventListener('DOMContentLoaded', function () {
      const urlParams = new URLSearchParams(window.location.search);
      const mode = urlParams.get('mode') || 'view';
      const noticeId = urlParams.get('id');

      // í˜ì´ì§€ ëª¨ë“œì— ë”°ë¥¸ ì´ˆê¸°í™”
      initializePage(mode, noticeId);

      // ì—ë””í„° íˆ´ë°” ê¸°ëŠ¥
      document.querySelectorAll('.editor-btn').forEach(btn => {
        btn.addEventListener('click', function (e) {
          e.preventDefault();
          const command = this.dataset.command;

          if (command === 'createLink') {
            const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:');
            if (url) {
              document.execCommand(command, false, url);
            }
          } else {
            document.execCommand(command, false, null);
          }
        });
      });

      // ì´ë¯¸ì§€ ì—…ë¡œë“œ
      const insertImageBtn = document.getElementById('insert-image-btn');
      const imageUpload = document.getElementById('image-upload');

      insertImageBtn?.addEventListener('click', function (e) {
        e.preventDefault();
        imageUpload.click();
      });

      imageUpload?.addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            const img = `<img src="${e.target.result}" alt="ì—…ë¡œë“œëœ ì´ë¯¸ì§€" style="max-width: 100%; height: auto;">`;
            document.execCommand('insertHTML', false, img);
          };
          reader.readAsDataURL(file);
        }
      });

      // íŒŒì¼ ì—…ë¡œë“œ ë“œë˜ê·¸ì•¤ë“œë¡­
      const fileUploadArea = document.getElementById('file-upload-area');
      const fileUpload = document.getElementById('file-upload');
      const uploadedFiles = document.getElementById('uploaded-files');

      fileUploadArea?.addEventListener('click', () => fileUpload.click());

      fileUploadArea?.addEventListener('dragover', function (e) {
        e.preventDefault();
        this.classList.add('drag-over');
      });

      fileUploadArea?.addEventListener('dragleave', function (e) {
        e.preventDefault();
        this.classList.remove('drag-over');
      });

      fileUploadArea?.addEventListener('drop', function (e) {
        e.preventDefault();
        this.classList.remove('drag-over');
        const files = e.dataTransfer.files;
        handleFileUpload(files);
      });

      fileUpload?.addEventListener('change', function (e) {
        handleFileUpload(e.target.files);
      });


      // íŒì—… ì„¤ì • ê¸°ëŠ¥
      const popupCheckbox = document.getElementById('notice-popup');
      const popupSettingsRow = document.getElementById('popup-settings-row');
      const dismissOptionCheckbox = document.getElementById('popup-dismiss-option');
      const dismissOptions = document.getElementById('dismiss-options');

      popupCheckbox?.addEventListener('change', function () {
        popupSettingsRow.style.display = this.checked ? 'block' : 'none';
        if (!this.checked) {
          dismissOptionCheckbox.checked = false;
          dismissOptions.style.display = 'none';
        }
      });

      dismissOptionCheckbox?.addEventListener('change', function () {
        dismissOptions.style.display = this.checked ? 'block' : 'none';
      });

      // ì•¡ì…˜ ë²„íŠ¼ë“¤
      const cancelBtn = document.getElementById('cancel-btn');
      const saveDraftBtn = document.getElementById('save-draft-btn');
      const savePublishBtn = document.getElementById('save-publish-btn');
      const previewBtn = document.getElementById('preview-btn');

      cancelBtn?.addEventListener('click', function () {
        if (confirm('ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì •ë§ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
          window.location.href = 'notice.html';
        }
      });

      saveDraftBtn?.addEventListener('click', function () {
        saveNotice('draft');
      });

      savePublishBtn?.addEventListener('click', function () {
        if (validateForm()) {
          saveNotice('published');
        }
      });

      previewBtn?.addEventListener('click', function () {
        showPreview();
      });

      // ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬
      const previewModal = document.getElementById('preview-modal');
      const previewModalClose = document.getElementById('preview-modal-close');
      const previewCloseBtn = document.getElementById('preview-close-btn');

      previewModalClose?.addEventListener('click', () => {
        previewModal.classList.add('modal-overlay-hidden');
      });

      previewCloseBtn?.addEventListener('click', () => {
        previewModal.classList.add('modal-overlay-hidden');
      });

      previewModal?.addEventListener('click', function (e) {
        if (e.target === previewModal) {
          previewModal.classList.add('modal-overlay-hidden');
        }
      });
    });

    function initializePage(mode, noticeId) {
      const breadcrumbTitle = document.getElementById('breadcrumb-title');

      if (mode === 'create') {
        breadcrumbTitle.textContent = 'ìƒˆ ê³µì§€ì‚¬í•­';
        document.title = 'ìƒˆ ê³µì§€ì‚¬í•­';
      } else if (mode === 'view' && noticeId) {
        breadcrumbTitle.textContent = 'ê³µì§€ì‚¬í•­ ë³´ê¸°';
        document.title = 'ê³µì§€ì‚¬í•­ ë³´ê¸°';
        loadNoticeData(noticeId);
        // ì½ê¸° ëª¨ë“œë¡œ ì„¤ì •
        setReadOnlyMode();
      } else {
        // ê¸°ë³¸ì€ í¸ì§‘ ëª¨ë“œ
        breadcrumbTitle.textContent = noticeId ? 'ê³µì§€ì‚¬í•­ ìˆ˜ì •' : 'ìƒˆ ê³µì§€ì‚¬í•­';
        document.title = noticeId ? 'ê³µì§€ì‚¬í•­ ìˆ˜ì •' : 'ìƒˆ ê³µì§€ì‚¬í•­';
        if (noticeId) {
          loadNoticeData(noticeId);
        }
      }
    }

    function loadNoticeData(noticeId) {
      // ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
      const sampleData = {
        title: '[ê¸´ê¸‰] ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´ (2024.09.20 02:00~06:00)',
        status: 'published',
        startDate: '2024-09-15T00:00',
        endDate: '2024-09-25T23:59',
        popup: true,
        topFixed: false,
        content: '<h3>ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´</h3><p>ì•ˆë…•í•˜ì„¸ìš”. Timbel ê´€ë¦¬íŒ€ì…ë‹ˆë‹¤.</p><p>ì‹œìŠ¤í…œ ì•ˆì •ì„± í–¥ìƒì„ ìœ„í•œ ì •ê¸° ì ê²€ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤.</p><ul><li>ì ê²€ ì¼ì‹œ: 2024ë…„ 9ì›” 20ì¼ (ê¸ˆ) 02:00 ~ 06:00</li><li>ì ê²€ ë‚´ìš©: ì„œë²„ ì—…ê·¸ë ˆì´ë“œ ë° ë³´ì•ˆ íŒ¨ì¹˜</li><li>ì˜í–¥ ë²”ìœ„: ì „ì²´ ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨</li></ul><p>ì ê²€ ì‹œê°„ ë™ì•ˆ ì„œë¹„ìŠ¤ ì´ìš©ì´ ë¶ˆê°€í•˜ì˜¤ë‹ˆ ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>',
        // íŒì—… ì„¤ì •
        popupDismissOption: true,
        dismissOptions: {
          today: true,
          threeDays: true,
          week: true,
          forever: false
        }
      };

      // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
      document.getElementById('notice-title').value = sampleData.title;
      document.getElementById('notice-status').value = sampleData.status;
      document.getElementById('notice-start-date').value = sampleData.startDate;
      document.getElementById('notice-end-date').value = sampleData.endDate;
      document.getElementById('notice-popup').checked = sampleData.popup;
      document.getElementById('notice-top-fixed').checked = sampleData.topFixed;
      document.getElementById('notice-content').innerHTML = sampleData.content;

      // íŒì—… ì„¤ì • ë°ì´í„° ë¡œë“œ
      if (sampleData.popup) {
        document.getElementById('popup-settings-row').style.display = 'block';
        document.getElementById('popup-dismiss-option').checked = sampleData.popupDismissOption;

        if (sampleData.popupDismissOption) {
          document.getElementById('dismiss-options').style.display = 'block';
          document.getElementById('dismiss-today').checked = sampleData.dismissOptions.today;
          document.getElementById('dismiss-3days').checked = sampleData.dismissOptions.threeDays;
          document.getElementById('dismiss-week').checked = sampleData.dismissOptions.week;
          document.getElementById('dismiss-forever').checked = sampleData.dismissOptions.forever;
        }
      }
    }

    function setReadOnlyMode() {
      // ì½ê¸° ì „ìš© ëª¨ë“œë¡œ ì„¤ì •
      const inputs = document.querySelectorAll('input, select, [contenteditable]');
      inputs.forEach(input => {
        if (input.hasAttribute('contenteditable')) {
          input.setAttribute('contenteditable', 'false');
        } else {
          input.disabled = true;
        }
      });

      // ì•¡ì…˜ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
      const formActions = document.querySelector('.form-actions');
      formActions.style.display = 'none';
    }

    function handleFileUpload(files) {
      const uploadedFiles = document.getElementById('uploaded-files');

      Array.from(files).forEach(file => {
        if (file.size > 10 * 1024 * 1024) { // 10MB ì œí•œ
          alert(`${file.name} íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤. (ìµœëŒ€ 10MB)`);
          return;
        }

        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `
          <span class="file-name">${file.name}</span>
          <span class="file-size">(${formatFileSize(file.size)})</span>
          <button type="button" class="file-remove" onclick="removeFile(this)">Ã—</button>
        `;

        uploadedFiles.appendChild(fileItem);
      });
    }

    function removeFile(button) {
      button.parentElement.remove();
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function validateForm() {
      const title = document.getElementById('notice-title').value.trim();
      const content = document.getElementById('notice-content').textContent.trim();

      if (!title) {
        alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.getElementById('notice-title').focus();
        return false;
      }

      if (!content) {
        alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.getElementById('notice-content').focus();
        return false;
      }

      return true;
    }

    function saveNotice(status) {
      const formData = {
        title: document.getElementById('notice-title').value,
        status: status,
        startDate: document.getElementById('notice-start-date').value,
        endDate: document.getElementById('notice-end-date').value,
        popup: document.getElementById('notice-popup').checked,
        topFixed: document.getElementById('notice-top-fixed').checked,
        content: document.getElementById('notice-content').innerHTML,
        // íŒì—… ì„¤ì •
        popupDismissOption: document.getElementById('popup-dismiss-option')?.checked || false,
        dismissOptions: {
          today: document.getElementById('dismiss-today')?.checked || false,
          threeDays: document.getElementById('dismiss-3days')?.checked || false,
          week: document.getElementById('dismiss-week')?.checked || false,
          forever: document.getElementById('dismiss-forever')?.checked || false
        }
      };

      console.log('ì €ì¥í•  ë°ì´í„°:', formData);

      // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì €ì¥ ìš”ì²­
      alert(`ê³µì§€ì‚¬í•­ì´ ${status === 'draft' ? 'ì„ì‹œì €ì¥' : 'ì €ì¥ ë° ê²Œì‹œ'}ë˜ì—ˆìŠµë‹ˆë‹¤.`);

      // ëª©ë¡ìœ¼ë¡œ ì´ë™
      window.location.href = 'notice.html';
    }

    function showPreview() {
      const title = document.getElementById('notice-title').value;
      const content = document.getElementById('notice-content').innerHTML;

      document.getElementById('preview-title').textContent = title || 'ì œëª© ì—†ìŒ';
      document.getElementById('preview-content').innerHTML = content || 'ë‚´ìš© ì—†ìŒ';

      document.querySelector('.preview-date').textContent = new Date().toLocaleDateString('ko-KR');

      document.getElementById('preview-modal').classList.remove('modal-overlay-hidden');
    }
  </script>
  <script src="../asset/menu.js"></script>
  <script src="../asset/main.js"></script>
</body>

</html>