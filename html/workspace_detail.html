<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>워크스페이스 상세</title>
  <link rel="stylesheet" href="../asset/style.css">
  <link rel="stylesheet" href="../asset/modal.css">
</head>

<body class="page-workspace-detail">
  <div class="container">
    <!-- 왼쪽 메뉴바 -->
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">T</div>
        <div class="logo-text">
          <div class="logo-title">Timbel</div>
          <div class="logo-url">timbel.net</div>
        </div>
        <button class="logout-btn" title="로그아웃">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_logout)">
              <path
                d="M12 3H6.66667C5.95942 3 5.28115 3.27092 4.78105 3.75315C4.28095 4.23539 4 4.88944 4 5.57143V18.4286C4 19.1106 4.28095 19.7646 4.78105 20.2468C5.28115 20.7291 5.95942 21 6.66667 21H12"
                stroke="#4D5256" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M15.75 8.25L19.5 12M19.5 12L15.75 15.75M19.5 12H8" stroke="#4D5256" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_logout">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
      </div>

      <div class="menu-section">
        <h3>전체 시스템 관리</h3>
        <ul>
          <li><a href="workspace.html" class="active">워크스페이스 관리</a></li>
          <li><a href="system_user.html">사용자 관리</a></li>
          <li><a href="menu_setting.html">메뉴 생성 관리</a></li>
          <li><a href="group_setting.html">메뉴 권한 관리</a></li>
          <li><a href="stats_usage.html">사용량 통계</a></li>
          <li><a href="stats_user.html">사용자별 통계</a></li>
        </ul>
      </div>

      <div class="menu-section">
        <div class="menu-section-header">
          <h3>워크스페이스</h3>
        </div>
        <ul>
          <li><a href="workspace_permission.html">기능 권한 관리</a></li>
          <li><a href="workspace_menu_setting.html">메뉴관리</a></li>
          <li><a href="user.html">사용자 관리</a></li>
          <li><a href="logo.html">로고 이미지 관리</a></li>
          <li><a href="meet_template.html">회의 템플릿 관리</a></li>
          <li><a href="prompt.html">프롬프트 관리</a></li>
          <li><a href="consent.html">동의서 관리</a></li>
          <li><a href="calendar.html">캘린더 관리</a></li>
          <li><a href="login_history.html">사용자 접속 이력</a></li>
          <li><a href="download_history.html">다운로드 이력</a></li>
          <li><a href="user_consent_history.html">사용자 동의 이력</a></li>
          <li><a href="setting_change_history.html">설정변경 이력</a></li>
          <li><a href="meeting.html">회의록 관리</a></li>
          <li><a href="dictionary.html">사전 관리</a></li>
          <li><a href="notice.html">공지사항 관리</a></li>
          <li><a href="stats_usage.html">사용량 통계</a></li>
          <li><a href="stats_user.html">사용자별 통계</a></li>
        </ul>
      </div>
    </div>

    <!-- 콘텐츠 -->
    <div class="content workspace-detail-page">
      <div class="content-header">
        <h1 class="breadcrumb">워크스페이스 관리 > 워크스페이스 상세</h1>
      </div>

      <div class="content-body">


        <!-- 워크스페이스 이름 섹션 -->
        <div class="card section name-card">
          <div class="ws-title"><strong>워크스페이스 이름</strong></div>
          <div class="name-row">
            <input type="text" class="form-input" value="Timbel Workspace" />
            <button class="btn">수정</button>
          </div>
        </div>

        <!-- 로고 섹션 -->
        <div class="card section logo-card">
          <div><strong>로고 이미지</strong></div>
          <div class="row">
            <div class="logo-box">
              <img src="../asset/brand-logo.png" alt="Timbel 로고" class="workspace-logo" />
            </div>
            <div>
              <div class="hint">권장 이미지 크기: 168 x 48 픽셀</div>
              <div class="hint">권장 파일 형식: PNG</div>
              <div class="row row-margin-top">
                <button class="btn primary">이미지 변경</button>
                <button class="btn danger">삭제</button>
              </div>
            </div>
          </div>
        </div>

        <!-- 워크스페이스 정보 섹션 -->
        <div class="card section info-card">
          <div class="ws-title"><strong>워크스페이스 정보</strong></div>
          <div class="info-grid">
            <div class="info-row">
              <label>워크스페이스 ID</label>
              <input type="text" class="form-input" value="timbel-ws-001" readonly />
            </div>
            <div class="info-row">
              <label>생성일</label>
              <input type="text" class="form-input" value="2024-01-15" readonly />
            </div>
            <div class="info-row">
              <label>관리자</label>
              <input type="text" class="form-input" value="배성진 (genie0111@naver.com)" />
            </div>
            <div class="info-row">
              <label>도메인</label>
              <input type="text" class="form-input" value="timbel.net" />
            </div>
            <div class="info-row full-width">
              <label>설명</label>
              <textarea class="form-textarea" rows="3"
                placeholder="워크스페이스 설명을 입력하세요">AI 기반 회의록 관리 시스템을 위한 워크스페이스입니다.</textarea>
            </div>
          </div>
        </div>

        <!-- 구성원 관리 섹션 -->
        <div class="card section members-card">
          <div class="ws-title"><strong>구성원 관리</strong></div>
          <div class="members-header">
            <div class="members-count">총 <span id="memberCount">5</span>명</div>
            <button class="btn primary btn-add-member">+ 구성원 추가</button>
          </div>

          <!-- 관리자 섹션 -->
          <div class="member-section">
            <div class="member-section-title">
              <span class="section-label">관리자</span>
              <span class="section-count">(<span id="adminCount">1</span>명)</span>
            </div>
            <div class="members-badges admin-badges">
              <div class="member-badge" data-member-id="1" data-role="admin">
                <span class="member-name">배성진</span>
                <button class="badge-remove-btn" title="구성원 제거">×</button>
              </div>
            </div>
          </div>

          <!-- 일반 구성원 섹션 -->
          <div class="member-section">
            <div class="member-section-title">
              <span class="section-label">일반 구성원</span>
              <span class="section-count">(<span id="generalCount">4</span>명)</span>
            </div>
            <div class="members-badges general-badges">
              <div class="member-badge" data-member-id="2" data-role="user">
                <span class="member-name">김철수</span>
                <button class="badge-remove-btn" title="구성원 제거">×</button>
              </div>
              <div class="member-badge" data-member-id="3" data-role="user">
                <span class="member-name">박영희</span>
                <button class="badge-remove-btn" title="구성원 제거">×</button>
              </div>
              <div class="member-badge" data-member-id="4" data-role="viewer">
                <span class="member-name">이민수</span>
                <button class="badge-remove-btn" title="구성원 제거">×</button>
              </div>
              <div class="member-badge" data-member-id="5" data-role="user">
                <span class="member-name">정다은</span>
                <button class="badge-remove-btn" title="구성원 제거">×</button>
              </div>
            </div>
          </div>
        </div>

        <!-- 사용자 설정 섹션 -->
        <div class="card section user-settings-card">
          <div class="user-settings-title"><strong>사용자 설정</strong></div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th class="th-width-120">구분</th>
                  <th>다운로드 사용자</th>
                  <th>사용 사용자</th>
                  <th>관리 사용자</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>관리자</td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-download-1" checked>
                        <label for="admin-download-1">회의록</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-download-2" checked>
                        <label for="admin-download-2">통계</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-download-3" checked>
                        <label for="admin-download-3">사용자 정보</label>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-use-1" checked>
                        <label for="admin-use-1">회의록 생성</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-use-2" checked>
                        <label for="admin-use-2">템플릿 관리</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-use-3" checked>
                        <label for="admin-use-3">사전 관리</label>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-manage-1" checked>
                        <label for="admin-manage-1">사용자 관리</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="admin-manage-2" checked>
                        <label for="admin-manage-2">시스템 설정</label>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>일반 사용자</td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="user-download-1" checked>
                        <label for="user-download-1">회의록</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="user-download-2">
                        <label for="user-download-2">통계</label>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="user-use-1" checked>
                        <label for="user-use-1">회의록 생성</label>
                      </div>
                      <div class="toggle-item">
                        <input type="checkbox" id="user-use-2">
                        <label for="user-use-2">템플릿 관리</label>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="toggle-group">
                      <div class="toggle-item">
                        <input type="checkbox" id="user-manage-1">
                        <label for="user-manage-1">개인 설정</label>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 회의 데이터 자동삭제 섹션 -->
        <div class="card section auto-delete-card">
          <div class="auto-del-title"><strong>회의 데이터 자동삭제</strong></div>
          <div class="auto-delete-desc">
            설정한 기간이 지난 회의록 데이터를 유형별로 자동 삭제하여 보안을 강화하고 리소스를 관리합니다.
            삭제된 데이터는 복구할 수 없으니 신중하게 설정하세요.
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th class="th-width-40">데이터 유형</th>
                  <th class="th-width-40">보존 기간</th>
                  <th class="th-width-20">자동 삭제 정책 사용</th>
                </tr>
              </thead>
              <tbody>
                <tr class="retention-row">
                  <td>음성/영상 원본 파일</td>
                  <td>
                    <div class="inline-group">
                      <select class="condition-select retention-select">
                        <option>영구 보관</option>
                        <option>90일 후</option>
                        <option>180일 후</option>
                        <option>1년 후</option>
                        <option>3년 후</option>
                        <option>직접 입력</option>
                      </select>
                      <span class="custom-retention">
                        <div class="count-spinner">
                          <input type="number" class="count-input" value="30" min="0">
                          <div class="spinner-buttons">
                            <button class="spinner-btn spinner-up"><img src="../asset/spinner-up.svg" alt="증가"></button>
                            <button class="spinner-btn spinner-down"><img src="../asset/spinner-down.svg"
                                alt="감소"></button>
                          </div>
                        </div>
                        <span class="unit-text">일 후</span>
                      </span>
                    </div>
                  </td>
                  <td>
                    <label class="switch"><input type="checkbox"><span class="slider"></span></label>
                  </td>
                </tr>
                <tr class="retention-row">
                  <td>음성 기록 파일</td>
                  <td>
                    <div class="inline-group">
                      <select class="condition-select retention-select">
                        <option>영구 보관</option>
                        <option>90일 후</option>
                        <option>180일 후</option>
                        <option>1년 후</option>
                        <option>3년 후</option>
                        <option selected>직접 입력</option>
                      </select>
                      <span class="custom-retention custom-retention-inline">
                        <div class="count-spinner">
                          <input type="number" class="count-input" value="5" min="0">
                          <div class="spinner-buttons">
                            <button class="spinner-btn spinner-up"><img src="../asset/spinner-up.svg" alt="증가"></button>
                            <button class="spinner-btn spinner-down"><img src="../asset/spinner-down.svg"
                                alt="감소"></button>
                          </div>
                        </div>
                        <span class="unit-text">일 후</span>
                      </span>
                    </div>
                  </td>
                  <td>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                  </td>
                </tr>
                <tr class="retention-row">
                  <td>AI 요약</td>
                  <td>
                    <div class="inline-group">
                      <select class="condition-select retention-select">
                        <option>영구 보관</option>
                        <option>90일 후</option>
                        <option>180일 후</option>
                        <option>1년 후</option>
                        <option>3년 후</option>
                        <option>직접 입력</option>
                      </select>
                      <span class="custom-retention">
                        <div class="count-spinner">
                          <input type="number" class="count-input" value="30" min="0">
                          <div class="spinner-buttons">
                            <button class="spinner-btn spinner-up"><img src="../asset/spinner-up.svg" alt="증가"></button>
                            <button class="spinner-btn spinner-down"><img src="../asset/spinner-down.svg"
                                alt="감소"></button>
                          </div>
                        </div>
                        <span class="unit-text">일 후</span>
                      </span>
                    </div>
                  </td>
                  <td>
                    <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 저장 버튼 -->
        <div class="section">
          <div class="button-row">
            <button class="btn large"
              style="background-color: #10B981; color: white; border: 1px solid #10B981; display: flex; align-items: center; gap: 8px;">
              엑셀 다운로드
            </button>
            <button class="btn primary large">변경사항 저장</button>
            <button class="btn outline large">취소</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 구성원 추가 모달 -->
  <div class="modal-overlay member-modal-overlay" id="memberModal" style="display: none;">
    <div class="modal member-modal">
      <div class="modal-header">
        <h3>구성원 추가</h3>
        <button class="modal-close" id="memberModalClose">×</button>
      </div>
      <div class="modal-content">
        <div class="form-group">
          <label for="memberName">이름</label>
          <input type="text" id="memberName" class="form-input" placeholder="이름을 입력하세요">
        </div>
        <div class="form-group">
          <label for="memberEmail">이메일</label>
          <input type="email" id="memberEmail" class="form-input" placeholder="이메일을 입력하세요">
        </div>
        <div class="form-group">
          <label for="memberRole">역할</label>
          <select id="memberRole" class="form-select">
            <option value="user">일반 사용자</option>
            <option value="admin">관리자</option>
            <option value="viewer">뷰어</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn outline" id="memberModalCancel">취소</button>
        <button class="btn primary" id="memberModalAdd">추가</button>
      </div>
    </div>
  </div>

  <script>
    // 회의 데이터 자동삭제 관련 JavaScript
    document.addEventListener('DOMContentLoaded', function () {
      // 엑셀 다운로드 버튼 기능
      const excelBtn = document.querySelector('.btn[style*="background-color: #10B981"]');
      if (excelBtn && excelBtn.textContent.includes('엑셀 다운로드')) {
        excelBtn.addEventListener('click', function () {
          alert('워크스페이스 통계 데이터를 엑셀로 다운로드합니다.');
          // 실제 다운로드 로직은 여기에 구현
        });
      }

      // count-spinner 동작
      document.querySelectorAll('.spinner-btn').forEach(function (btn) {
        btn.addEventListener('click', function (e) {
          e.preventDefault();
          const input = btn.closest('.count-spinner')?.querySelector('.count-input');
          if (!input) return;
          const isUp = btn.classList.contains('spinner-up');
          const cur = parseInt(input.value) || 0;
          input.value = isUp ? cur + 1 : Math.max(0, cur - 1);
        });
      });

      // 보존 기간: '직접 입력' 선택 시 커스텀 입력 영역 표시
      document.querySelectorAll('.retention-row .retention-select').forEach(function (sel) {
        const custom = sel.closest('.inline-group')?.querySelector('.custom-retention');
        const sync = () => {
          const isCustom = sel.value.includes('직접 입력');
          if (custom) custom.style.display = isCustom ? 'inline-flex' : 'none';
        };
        sel.addEventListener('change', sync);
        sync();
      });
    });
  </script>
  <script src="../asset/menu.js"></script>
  <script src="../asset/main.js"></script>
</body>

</html>